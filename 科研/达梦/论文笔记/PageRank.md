# PageRank

PageRank算法实际上与马尔可夫链模型比较相似

PageRank算法将整个互联网都建模成一张有向图，每个网页都是一个结点，网页上的超链接则是结点之间的有向边。通过简化，我们认为同一结点进入相邻结点的概率相等，倘若一个结点与$n$个结点相连，那么进入相邻结点的概率就都是$\frac{1}{n}$，如此我们能够定义出自己的状态转移矩阵

![2](.\pic\2.jpg)

在如上这个图中，我们的状态转移矩阵如下
$$
M=\begin{bmatrix}
0&0&1\\
\frac{1}{2}&0&0\\
\frac{1}{2}&1&0\\
\end{bmatrix}
$$
通过计算$R_{t+1}=MR_t$，我们能够计算出$t+1$时刻的状态

根据马尔科夫链模型我们认为通过多个时刻计算$\lim_{t\rightarrow\infin}M^tR_0=R$，$R$将趋于平稳

## 在理想模型中导入平滑项

在一般情况下我们浏览一个网页之后可能停留在当前网页而非跳转到别的网页，我们用$d$来描述后者的概率

那么我们原来的公式就被优化至此
$$
R=MR\Rightarrow R=dMR+(1-d)\begin{bmatrix}
\frac{1}{n}\\
\frac{1}{n}\\
\ldots\\
\frac{1}{n}
\end{bmatrix}
$$

## 如何使用数据库语言计算PageRank

$$
V\leftarrow\rho_V(E\bowtie^{f_1(\cdot)}_{T=ID}V)
$$

$f_1(\cdot)$代表$c*sum(vw*ew)+(1-c)/n$

这里的$V$代表时刻$t$时候的各个状态出现可能性的列向量，假设我现在要关注$S_1$状态在下一个时刻$t+1$中出现的概率，那么我就只要关注各个状态出现可能性乘上转移到$S_1$状态的可能性的乘积的总和，这个总和对应着PageRank中的$MR$部分，加入平滑项$c$即为我们的PageRank整体公式

我们可以认为$vw*ew$是连接操作，$sum()$则是聚合操作，剩下的乘法和加法就是对数据的简单处理

通过多次迭代，我们就能够得到PageRank的最终状态

