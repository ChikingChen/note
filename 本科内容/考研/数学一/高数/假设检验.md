# 假设检验

构建假设后根据实测数据来推断原有的假设是否正确

## 实践场景

我们假设这样一种场景，最近你们学校组织了一场考试，你希望得知班级的平均分但是因为各种原因无法获得全班人的成绩，只能一个一个问。开始的时候，你做了一个主观的猜测——或许班级平均分是80分？然后你问了几个与自己要好的朋友，发现他们的平均分到了78分，这几个朋友成绩分布在班级里不能完全具有代表性同时你又受限于客观条件限制无法获得更多人的成绩，你就或许会觉得那么班级平均分是80分应该也差不多吧。实际上这就是一个比较典型的假设检验的应用场景。

在最早的时候我们设立了**一个命题$H_0$**以及一个相对的**命题$H_1$**，$H_0$的具体内容是班级的平均分是80分，$H_1$的具体内容则是班级的平均分不是80分，而后我们收集一些样本通过样本的计算我们能够得到一个均值发现样本的均值是78分，我们在开始的时候心中应当有个预期，如果均分算出来是75分那么班级平均分应该就是80分了但如果样本均分算出来是120分，那班级平均分就肯定不是80分，这里我们就设立了一个比较朴素的**接收域**和**拒绝域**，并且根据自己的主观判断设立了一个朴素的**显著性水平**，即如果分数超过了一个数值我们主观上会认为自己的假设错得离谱，也就是“显著”错误。

## 假设检验的相关概念

- 命题$H_0$和命题$H_1$

  $H_0$即为我们事先认定的假设而$H_1$则是相对的假设

- 显著性水平

  在主观上我们依然希望自己的假设正确，但如果收集到的样本过于夸张与我们的假设相差过大那么我们只能认为这个假设是错误的，界定是否过于夸张的界限则为显著性水平

- 拒绝域和接受域

  拒绝域已经超过了显著性水平我们认为原命题错误；接受域则表示还未超过显著性水平，那么我们依然接收这种可能性

## 两类错误

在理解了什么是显著性水平后我们就能够理解什么是两类错误

首先是与两类错误相对的是两类正确，即原本假设正确检验的结果也认为假设正确和原本假设错误检验的结果也认为假设错误，这都是正确的类型

其次是两类错误，两类错误分为第一类错误和第二类错误，第一类错误是原本假设是正确的但是我们经过检验却认为是错误的；第二类错误是原本假设是错误的但是我们经过检验却认为是正确的

从人性的角度考虑我们更加希望自己假设什么就是什么样的因此我们将显著性水平设置的比较低也就是在自己的假设错的很离谱的时候才会说自己的假设是错误的，从本质上来讲这就是减小第一类错误发生的可能增加第二类错误发生的可能
$$
第一类错误：P\{拒绝H_0|H_0成立\}\\
第二类错误：P\{接受H_0|H_0不成立\}
$$

## 显著性水平和第一类错误发生的可能性

我们现在可以有这么一种想法，无论班级的实际平均分是多少我们的样本均值可以是任何数，我们可以说班级的平均分是80分但样本的均值是40分，也可以说班级的平均分是70分而后样本的均值是120分，这都是正确的，我们无论假设班级的平均分是多少样本的均值都是随意的，只不过在一些情况下我们的假设和样本的均值差距过大，超出了显著性水平导致我们认为这个假设是错误。换句话说即使我们假设班级平均分为70分样本均值为120分我们原有的假设也有可能是正确的，但为什么我们认为这是错的，因为这超过了显著性水平。我们回顾第一类错误的定义，即为我们的假设是对的但经过检验的结果却说假设是错的，这其实与显著性水平的定义本质上相同，都是说能取到这样的样本的均值我们原来的假设真是错得离谱，我们就算是说这个样本均值是错的那这个可能性也很小。因此我们能够认为显著性水平其实就是发生第一类错误的可能性

## 例题

### 题面1

设在一批圆木中随机抽取$100$根，测其小头直径，得到样本均值为$\bar X=11.2cm$，已知标准差$\sigma=2.6cm$，问在显著性检验水平$\alpha=0.05$下，该批圆木小偷平均直径能否认为是在$12cm$以上？（$\Phi(1.645)=0.95$）

### 解析1

- 假设

  假设$H_0:\mu\geq\mu_0=12$，$H_1:\mu<\mu_0=12$

- 检验统计量
  $$
  \begin{align}
  \bar X&\sim N(\mu_0,\sigma^2/n)\\
  U=\frac{\bar X-\mu_0}{\sigma/\sqrt n}&\sim N(0,1)
  \end{align}
  $$
  $\bar X$是关于$\mu_0$的分布，在$\mu_0$的左侧即为小于，在$\mu_0$的右侧即为大于，我们现在的问题是如果样本真的符合这样的分布的话，我们有多大的概率取到当前的样本或者如果这个样本取到的可能性太小那么我们就可以认为当前的假设是错误的（样本和假设矛盾则必然有一个错误但样本是不会骗人的）

- 计算拒绝域

  样本如果过度小于$\mu_0$那么我们认为这个假设是错误的
  $$
  \begin{align}
  \Phi(U_0)=0.05&\Rightarrow\Phi(-U_0)=0.95\\
  -U_0=1.645&\Rightarrow U_0=-1.645
  \end{align}
  $$
  根据计算结果我们能够得出$U\leq-1.645$的情况下达到了显著性水平，那么$H_0$就是错误的

- 计算并判断
  $$
  U=\frac{\bar X-\mu_0}{\sigma/\sqrt n}=\frac{11.2-12}{2.6/\sqrt{100}}=-\frac{40}{13}<-1.645
  $$
  我们发现样本的转化值落在$-1.645$左侧，因此我们能够认为期望无法达到$12cm$以上

### 总结1

本题的解题步骤一共有四步，分别为：1. 假设；2. 检验统计量； 3. 计算拒绝域；4. 计算并判断

其中假设是假设检验的必备步骤，为计算接受域和拒绝域做基础，检验统计量则是对样本分布的估算，能够定量计算满足什么条件的数值可以达到显著性水平以及当前样本是否达到了显著水平，计算并判断则是将样本数值放入模型中计算。更加简便地说，我们就是通过样本数值来检验假设的模型是否正确

### 题面2

设某生产线生产袋装产品，正常情况下每袋1千克，标准差不超过15克，且每袋重量服从正态分布，现检查机器生产情况，从中任取10袋，测得其均值为$\bar x=998$克，样本均方差为$S=30$，在显著性水平$\alpha=0.05$下，问机器生产是否正常？（$\chi^2_{0.05}(9)=16.919$）

### 解析2

- 假设

  假设$H_0:\sigma\leq\sigma_0=15$，$H_1:\sigma>\sigma_0=15$

- 检验统计量

  题目仅给出了$\chi^2$分布的信息，因此我们使用$\chi^2$分布
  $$
  \chi^2=\frac{(n-1)S^2}{\sigma_0^2}\sim\chi^2(9)
  $$

- 计算拒绝域

  我们现在获得的关于$\sigma$的样本值即为$S$，我们要做的是通过$S$来判断$\sigma$是否大于$15$，如果$S$过大那么我们就认为$H_1$成立而非$H_0$，因此拒绝域应当位于坐标轴的右侧
  $$
  \chi^2\geq\chi_{0.05}^2(9)=16.919
  $$
  因此我们认为$\chi^2\geq16.919$是拒绝域

- 计算落点并判断
  $$
  \chi^2=\frac{9*30^2}{15^2}=36\geq16.919
  $$
  我们发现落点落在拒绝域中因此答案为非正常

### 总结2

本题解决方式与上题无异主要问题还是集中在拒绝域的方向，从端点上来讲其实差别不大主要集中于拒绝域的方向问题——处于端点的左侧还是右侧，这就要看假设中要推测的$\mu$和$\sigma$了，从本质上来讲假设检验中的$\mu$和$\sigma$是用$\bar X$和$S$来检验的因此如果拒绝域是$\mu$或者$\sigma$过大那么从检验的角度上来说就是$\bar X$和$S$过大，因此能够通过$\bar X$和$S$的大小来确定端点的朝向





