# 计算机网络体系结构

## 计算机网络

### 概念

将一个**分散的**，**具有独立功能的**计算机系统，通过**通信设备**与**线路**连接起来，由功能完善的**软件**实现**资源共享**和**信息传递**的系统。

> 分散的：地理上分散
>
> 具有独立功能：不同的设备具有不同的功能
>
> 通信设备：交换机、路由器等
>
> 线路：通信介质，双绞线或者由通信设备发出的红外线等
>
> 软件：实现设备互联的各种软件

计算机网络就是一些**互联的**、**自治的**计算机系统的集合。

> 互联的：互联互通
>
> 自治的：没有主从关系

### 组成

#### 组成划分

分为**硬件**、**软件**、**协议**三个部分。

> 硬件：主机，通信链路，交换设备和通信处理机
>
> 软件：实现资源共享和方便用户使用的软件
>
> 协议：互联网的核心，网络传输的规范

#### 工作划分

分为**边缘部分**和**核心部分**

> 边缘部分：所有供用户使用的主机
>
> 核心部分：大量网络支持网络

#### 功能划分

分为**通信子网**和**资源子网**

> 通信子网：数据通信
>
> 资源子网：资源共享

计网七层：应用层，表示层，会话层，传输层，网络层，数据链路层，物理层

>  资源子网包含应用层，表示层和会话层
>
> 传输层属于中介关系
>
> 通信子网包含网络层（路由器），数据链路层（交换机、网桥）和物理层（集线器、中继器）

### 功能

1. 数据通信

   最**基本**最**主要**的功能

2. 资源共享（软件、数据、硬件）

   分为**软件共享**（不用下载一起使用），**数据共享**（百度文库）以及**硬件共享**（打印机）

3. 分布式处理

   多台计算机承担同一工作的不同部分以提高效率

4. 提高可靠性

   提高宕机可靠性

5. 负载均衡

   相互配合更加亲密

### 分类

#### 分布范围划分

1. 广域网——跨国

   使用高速链路，通信容量较大，使用**交换**技术（点对点）

2. 城域网——跨城

   使用**以太网**技术

3. 局域网——城市内部

   使用**广播**技术

4. 个人区域网——个人工作场所

   将个人工作场所使用**无线**技术连接起来的网络

#### 传播技术划分

1. 广播式网络

   所有计算机都将收听到广播

2. 点对点网络

   通过节点进行接受、存储和转发直至节点

关键差距在于**分组存储转发**以及**路由选择机制**。

#### 拓扑结构划分

1. 总线形

   一条线上挂灯笼

2. 星形

   单点开花

3. 环形

   一个圈开花

4. 网状网络

   乱连，现实生活中的网络

#### 使用者划分

1. 公用网

   缴纳费用的个人都可以使用这个网络

2. 专用网

   铁路、电力、军队等部门的专用网络

#### 交换技术

1. 电路交换网络

   专用通路，例如电话网络。

2. 报文交换网络

   将需要发送的信息封装起来发送给相邻节点，相邻节点再转发给下个节点以此到达终点。

3. 分组交换网络

   能够切分数据的报文交换系统。

2和3参考TCP，UDP网络。

### 传输介质

分为**有线**和**无线**

### 计算机网络的标准化工作

#### 分类标准

- 事实标准

  民间公司产品成为主流，产品所携带标准也就成了主流（苹果SIM卡）

- 法定标准

  通过权威机构推出的标准（ISO的OSI标准）

#### 标准化组织

ISO，ITU，IEEE，IETF

### 计算机性能指标

#### 速率

连接到计算机网络上的**主机**在数字信道上的**信息传输速率**，单位$b/s$。**带宽**又称为**最高数据传输速率**。

速率可以理解为主机或者服务器等单位的**发送速率**。（计算方式较直接计算链路上总的传输速率更加方便）

#### 带宽

> 原来：最高频率和最低频率的差距
>
> 计网：网络通信线路所能传达数据的能力

可以理解为网络设备支持最高速率，是一种链路发送率的理想状态。

#### 吞吐量

单位时间内通过某个网络的数据量，表示数据传输速率。

#### 三者关系和辨析

带宽表示最高可以到达的速率，吞吐量表示网络上所有链路的总速率，吞吐量不会超过带宽的总额。

#### 时延

##### 发送时延

$$
发送时延=数据长度/信道宽度（多为带宽）
$$

从发送第一个比特算起到该分组的最后一个比特发送完成需要的时间。

加大信道宽度就能降低发送时延，所以高速链路指的是发送时延低。

##### 传播时延

$$
传播时延=信道长度/电磁波在信道中的传播速率
$$

##### 处理时延

花费在检错分析处理上面的时间

##### 排队时延

花费在等待上面的时间（等待处理以及等待输出）

> 总时延=发送时延+传播时延+处理时延+排队时延

#### 往返时延

从发送端发出一个短分组到发送端收到接收端的确认（默认立即发送）
$$
往返时延=总时延*2
$$

#### 时延带宽积

$$
时延带宽积=传播时延*信道带宽
$$

表示该管道可以容纳的比特数量，可以理解为以比特为单位的链路容量。

#### 信道利用率

**利用率**分为**信道利用率**以及**网络利用率**

$信道利用率=\frac{有数据时间}{（有+无）数据时间}$

网络利用率：对于网络中各种信道的利用率。

## 计算机网络体系结构与参考模型

### 计算机分层结构

#### 基本结构

1. 每一层都实现相对**独立**的功能
2. 各层之间**界线**自然清晰
3. 各层**定义**独立于实现**方法**，采用最合适的技术来完成
4. 保持下层对上层的**独立性**，上层通过**接口**调用下层的服务
5. 分层结构应该能促进**标准化**工作

#### 定义

##### 实体

第$n$层活动元素称为$n$层实体，同一层实体叫做对等实体

##### 协议

网络中对等实体数据交换建立的规则

**语法**：数据格式

**语义**：需要完成的功能

**同步**：操作顺序

##### 接口

上层调用下层入口

##### 服务

下层为上层提供功能调用

#### 报文

##### $SDU$

报文的**数据**部分

$PCI$

报文的**控制**部分

> 可以理解为报文的头数据

##### $PDU$

对等层次之间传送的数据单位。
$$
n-SDU+n-PCI=n-PDU=(n-1)-SDU
$$

#### 总结

网络体系结构是**计算机各层及其协议**的集合，从**功能**上描述了一个**分层**结构，每一层结构通过遵循**网络协议**以完成本层功能。其中仅**相邻**层之间有上层调用下层的**接口**，下层通过接口提供从**最底层到当前层**所有的服务，而**不关注**相互之间的实现细节。可以理解的是体系结构是一个**抽象**的概念，具体的实现需要通过更加具体的**软硬件**来实现。

### $ISO/OSI$参考模型

 主要有七层：**物理层**，**数据链路层**，**网络层**，**传输层**，**会话层**，**表示层**，**应用层**。

前三者合称**通信子网**，后三者合称**资源子网**，传输层为二者接口。

> 物联网淑惠试用

#### 应用层

最高层模型，是**用户与网络的界面**。

#### 表示层

主要处理两个通信系统中交换信息的**表示方式**。

1. 统一化**数据格式**
2. 数据**加密解密**
3. 数据**压缩和恢复**

#### 会话层

**建立连接**并在连接上有序地**传输数据**，也就是**建立同步**。

1. **建立**、**管理**以及**关闭**会话。
2. 通信失效之后从同步点继续通信，实现数据同步。

#### 传输层

传输单位是**报文段**或者**用户数据报**。

负责**两个进程**之间的通信，为**端到端**之间的连接提供可靠传输服务。

> 端到端：端口到端口，进程与进程之间的通信
>
> 点到点：节点与节点之间的通信

1. **可**靠传输以及不可靠传输

2. **差**错控制

3. **流**量控制

   **端到端**的流量控制

4. 复**用**分用

   复用：多应用进程同时使用运输层服务

   分用：报收到的信息交付给应用层

> 可差流用

#### 网络层

传输单位是**数据报**。

关心通信子网的运行控制，主要任务是把网络层协议数据单元从**源端**传到**目的端**。

1. 路由选择

   最佳路由

2. 流量控制

   **整个网络**的流量控制

3. 差错控制

   纠错

4. 拥塞控制

   网络传输压力大要控制发送速度

#### 数据链路层

传输单位是**帧**。

能够将网络层传来的$IP$数据报组装成**帧**。

1. 成帧

2. 差错控制

   减少帧错以及位错

3. 流量控制

   **点到点**的流量控制

4. 访问控制

   信道一次只能有一个人用

#### 物理层

传输单位是**比特**。

物理媒体上**透明地**传输原始比特流。

> 透明：保证发送方发出比特以及接收方接收比特相同

1. 定义接口特性

   物理上面接口的各种类型

2. 定义传输特性

   单工、双工、半双工

3. 定义传输速率

4. 比特同步

   收发方数据对等

5. 比特编码

   定义$0\ 1$

#### 七层相互关系总结

应用层从表示层获得语法合法的数据并进行相应的工作。

表示层将会话层获得的数据进行语法转换成应用层能够理解的信号。

会话层通过传输层建立的可靠连接相互对话。

传输层通过网络层的

### $TCP/IP$模型

四层模型：**应用层**，**传输层**，**网际层**，**网络接口层**

#### $TCP/IP$模型与$ISO/OSI$参考模型对应

应用层：应用层、表示层、会话层

传输层：传输层

网际层：网络层

网络接口层：数据链路层、物理层

### $TCP/IP$ 模型与$OSI$模型比较

##### 相同

1. 两者都是分层模型
2. 都是基于独立的协议栈概念
3. 实现异构互联

##### 不同

1. $OSI$参考模型精确定义了**服务**、**协议**和**接口**
2. $OSI$参考模型产生于协议发明之前，**没有偏向**于任何特定的协议。
3. $TCP/IP$模型在设计之初就考虑到了多种**异构网**的互连问题。
4. $OSI$参考模型在**网络层**支持**无连接**和**面向连接**的通信，但在**传输层**仅支持**面向连接**。

|        | $ISO/OSI$         | $TCP/IP$          |          |
| ------ | ----------------- | ----------------- | -------- |
| 网络层 | 无连接$+$面向连接 | 无连接            | $IP$协议 |
| 传输层 | 面向连接          | 无连接$+$面向连接 | 可靠传输 |

### 学习使用

五层模型：**应用层**、**传输层**、**网络层**、**数据链路层**以及**物理层**

#### 应用层

支持网络应用

#### 传输层

**进程**与**进程**之间的通信

#### 网络层

源主机到目的主机数据**路由**与**转发**

#### 数据链路层

把网络层数据报组装成**帧**

#### 物理层

**比特**传输
